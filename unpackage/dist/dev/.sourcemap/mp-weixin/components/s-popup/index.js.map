{"version":3,"sources":["webpack:///D:/uni/front/wx-app/meal/components/s-popup/index.vue?30e7","webpack:///D:/uni/front/wx-app/meal/components/s-popup/index.vue?a6ee","webpack:///D:/uni/front/wx-app/meal/components/s-popup/index.vue?53b3","webpack:///D:/uni/front/wx-app/meal/components/s-popup/index.vue?57a4","webpack:///D:/uni/front/wx-app/meal/components/s-popup/index.vue?1aa9","webpack:///D:/uni/front/wx-app/meal/components/s-popup/index.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","_isMounted","e0","$event","stopPropagation","preventDefault","e","e1","maskClose","hide","e2","recyclableRender","staticRenderFns","_withStripped","ZindexMap","Map","getMaxZindex","Math","max","values","name","props","customClass","type","String","default","value","Boolean","position","effect","effectDuration","Number","mask","maskOpacity","duration","preventTouchmove","beforeShow","Function","beforeHide","data","Object","assign","popupId","random","toString","substr","visibleId","visibleStatus","effectTimeoutId","autoCloseTimeoutId","styleZindex","visibleClass","styleDuration","effectClass","computed","positionClass","watch","updateVisible","methods","show","status","nowId","call","$parent","$emit","set","get","clearTimeout","setTimeout","parseInt","delete","$nextTick","mounted","beforeDestroy"],"mappings":"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","file":"components/s-popup/index.js","sourcesContent":["import mod from \"-!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=1b709bc1&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni/front/wx-app/meal/components/s-popup/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=1b709bc1&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      $event.preventDefault()\n      return (function(e) {\n        return e.preventDefault()\n      })($event)\n    }\n\n    _vm.e1 = function($event) {\n      _vm.maskClose && _vm.hide()\n    }\n\n    _vm.e2 = function($event) {\n      $event.stopPropagation()\n      $event.preventDefault()\n      return (function(e) {\n        return e.preventDefault()\n      })($event)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../搜狗高速下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n\r\n// 记录弹框的zIndex\r\nconst ZindexMap = new Map();\r\nconst getMaxZindex = () => {\r\n  return Math.max(200, ...ZindexMap.values()) + 1;\r\n};\r\n\r\nexport default {\r\n  name: 's-popup',\r\n  props: {\r\n    // class\r\n    customClass: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    // v-model双向绑定\r\n    value: Boolean,\r\n    // 弹框显示位置 center | left | right | top | bottom\r\n    position: {\r\n      type: String,\r\n      default: 'center'\r\n    },\r\n    // 是否使用过渡效果\r\n    effect: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 过渡时间\r\n    effectDuration: {\r\n      type: Number,\r\n      default: 300\r\n    },\r\n    // 是否显示遮罩\r\n    mask: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 遮罩透明度\r\n    maskOpacity: {\r\n      type: Number,\r\n      default: 0.7\r\n    },\r\n    // 点击遮罩是否关闭弹框\r\n    maskClose: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 自动关闭时间\r\n    duration: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    // 是否阻止弹层touchmove滚动，手机上滚动穿透\r\n    preventTouchmove: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 显示时拦截钩子返回promise拦截\r\n    beforeShow: Function,\r\n    // 隐藏时拦截钩子返回promise拦截\r\n    beforeHide: Function\r\n  },\r\n  data () {\r\n    Object.assign(this, {\r\n      popupId: 's-popup-id-' + Math.random().toString(36).substr(2),\r\n      visibleId: 0,\r\n      visibleStatus: false,\r\n      effectTimeoutId: 0,\r\n      autoCloseTimeoutId: 0\r\n    });\r\n    return {\r\n      styleZindex: '',\r\n      visibleClass: '',\r\n      styleDuration: '',\r\n      effectClass: ''\r\n    };\r\n  },\r\n  computed: {\r\n    positionClass () {\r\n      return this.position ? 's-popup-position-' + this.position : '';\r\n    }\r\n  },\r\n  watch: {\r\n    value () {\r\n      this.updateVisible();\r\n    }\r\n  },\r\n  methods: {\r\n    async show () {\r\n      if (!this.visibleStatus) {\r\n        this.visibleId++;\r\n        let status = true;\r\n        const nowId = this.visibleId;\r\n        if (this.beforeShow) {\r\n          try {\r\n            await this.beforeShow.call(this.$parent);\r\n          } catch (error) {\r\n            status = false;\r\n          }\r\n        }\r\n        if (nowId === this.visibleId) {\r\n          if (status) {\r\n            const effectDuration = this.effect ? this.effectDuration : 0;\r\n            this.visibleStatus = true;\r\n            this.$emit('input', true);\r\n            ZindexMap.set(this.popupId, getMaxZindex());\r\n            this.styleZindex = `z-index:${ZindexMap.get(this.popupId)};`;\r\n            this.styleDuration = `animation-duration:${effectDuration}ms;`;\r\n            this.visibleClass = 's-popup-visible';\r\n            this.effectClass = 's-popup-effect-enter';\r\n            clearTimeout(this.effectTimeoutId);\r\n            this.effectTimeoutId = setTimeout(() => {\r\n              this.styleDuration = '';\r\n              this.effectClass = '';\r\n              if (this.visibleStatus) {\r\n                this.$emit('show');\r\n                // 自动关闭\r\n                const duration = parseInt(this.duration);\r\n                if (duration > 0) {\r\n                  clearTimeout(this.autoCloseTimeoutId);\r\n                  this.autoCloseTimeoutId = setTimeout(() => {\r\n                    this.visibleStatus && this.hide();\r\n                  }, duration);\r\n                }\r\n              }\r\n            }, effectDuration);\r\n          } else {\r\n            this.$emit('input', false);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    async hide () {\r\n      if (this.visibleStatus) {\r\n        this.visibleId++;\r\n        let status = true;\r\n        const nowId = this.visibleId;\r\n        if (this.beforeHide) {\r\n          try {\r\n            await this.beforeHide.call(this.$parent);\r\n          } catch (error) {\r\n            status = false;\r\n          }\r\n        }\r\n        if (nowId === this.visibleId) {\r\n          if (status) {\r\n            const effectDuration = this.effect ? this.effectDuration : 0;\r\n            this.visibleStatus = false;\r\n            this.$emit('input', false);\r\n            this.styleDuration = 'animation-duration:' + effectDuration + 'ms;';\r\n            this.effectClass = 's-popup-effect-leave';\r\n            clearTimeout(this.autoCloseTimeoutId);\r\n            clearTimeout(this.effectTimeoutId);\r\n            this.effectTimeoutId = setTimeout(() => {\r\n              this.visibleClass = '';\r\n              this.effectClass = '';\r\n              this.styleZindex = '';\r\n              this.styleDuration = '';\r\n              ZindexMap.delete(this.popupId);\r\n              if (!this.visibleStatus) {\r\n                this.$emit('hide');\r\n              }\r\n            }, effectDuration);\r\n          } else {\r\n            this.$emit('input', true);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    updateVisible () {\r\n      this.$nextTick(() => {\r\n        if (this.visibleStatus !== this.value) {\r\n          this[this.value ? 'show' : 'hide']();\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted () {\r\n    this.updateVisible();\r\n  },\r\n  beforeDestroy () {\r\n    ZindexMap.delete(this.popupId);\r\n    clearTimeout(this.effectTimeoutId);\r\n    clearTimeout(this.autoCloseTimeoutId);\r\n  }\r\n};\r\n"],"sourceRoot":""}